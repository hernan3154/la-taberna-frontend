<!DOCTYPE html>
<html lang="es">
  <head>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    
      <link rel="stylesheet" href="/style/css/style-tarjetas.css">
      <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
      <link rel="stylesheet" href="/style/css/cart.css">
      <link rel="stylesheet" href="/style/css/funcion-carrito.js">
      <link rel="stylesheet" href="/style/css/style.css">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>

    </style>
  </head>

  <body>
    <header class="header">
      <div class="logo-container">
          <img src="/img/preview.png" alt="Logo restaurante" class="logo">
      </div>
      
      <button class="abrir-menu" id="abrir"><i class="fa-solid fa-bars"></i></button>

      <nav class="navbar " id="navbar">
          
          <ul class="menu" id="menu">
              <button class="cerrar-menu" id="cerrar"><i class="fa-solid fa-x"></i></button>
              <li><a href="index.html">Inicio</a></li>
              <div class="dropdown">
                  <li><a href="#" class="dropdown-btn">Menú</a></li>
                  <div class="dropdown-content">
                      <a href="menu-platos.html">Hacer Pedido</a>
                      <a href="bebidas-conalcohol.html">Bebidas Con Alcohol</a>
                      <a href="bebidaSinAlcohol.html">Bebida Sin Alcohol</a>
                      <a href="postres.html">Postres</a>
                  </div>
              </div>
              <li><a href="#">Quiénes Somos</a></li>
              <li><a href="#">Contacto</a></li>
              <li><a href="./carrito.html" id="cart"><img src="./img/shopping-cart.png" style="width: 30px" alt=""><span id="cuenta-carrito">0</span></a></li>
          </ul>
          
      </nav>
  </header>
    <main>
      <h1 id="carrito-vacio">
        Ups! El carrito está vacío,
        <a href="./index.html">elige algunos productos</a>
      </h1>
      <section id="cart-container"></section>
      <section id="totales">
        <h3 style="font-weight: 800">
          Total unidades: <span id="cantidad">0</span>
        </h3>
        <h3 style="font-weight: 800">
          Total precio: $<span id="precio">0</span>
        </h3>
        <button disabled class="restar btn btn-danger">Comprar</button>
        <!--<button disabled btn btn->Comprar</button>-->
        <!--<button id="reiniciar">Reiniciar</button>-->
        <button id="reiniciar" class="restar btn btn-danger">Reiniciar</button>

        <section id="datos-cliente" style="display: none">
          <h2>Datos del Cliente</h2>
          <form id="form-datos-cliente">
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" required />
            </div>
            <div class="mb-3">
              <label for="contacto" class="form-label"
                >Contacto (Teléfono/Email)</label
              >
              <input type="text" class="form-control" id="contacto" required />
            </div>
            <button type="submit" class="btn btn-success">
              Confirmar Compra
            </button>
          </form>
        </section>
        <section id="resumen-compra" style="display: none">
          <h2>Resumen de la Compra</h2>
          <ul id="lista-productos"></ul>
          <p>
            <strong>Nombre del Cliente:</strong>
            <span id="cliente-nombre"></span>
          </p>
          <p>
            <strong>Contacto del Cliente:</strong>
            <span id="cliente-contacto"></span>
          </p>
          <p>
            <strong>Total a Pagar:</strong> $<span id="total-compra"></span>
          </p>
        </section>
      </section>
    </main>
    <footer class="footer" >

      <ul class="items-footer">
          <li><a href="index.html">Inicio</a></li>
          <li><a href="menu-platos.html">Platos</a></li>
          <li><a href="bebidas-conalcohol.html">Bebidas con alcohol</a></li>
          <li><a href="bebidaSinAlcohol.html">Bebidas sin alcohol</a></li>
          <li><a href="postres.html">Postres</a></li>
          <li><a href="#">Quiénes Somos</a></li>
          <li><a href="#">Contacto</a></li>

      </ul>
      <div class="social-media">
          <a href="https://www.instagram.com" target="_blank" aria-label="Instagram">
              <i class="fa-brands fa-instagram" style="color: #C13584;"></i>
          </a>
          <a href="https://twitter.com" target="_blank" aria-label="X">
              <i class="fa-brands fa-x-twitter" style="color: #1DA1F2;"></i>
          </a>
          <a href="https://www.facebook.com" target="_blank" aria-label="Facebook">
              <i class="fa-brands fa-facebook" style="color: #1877F2;"></i>
          </a>
          <a href="https://wa.me/tu-numero" target="_blank" aria-label="WhatsApp">
              <i class="fa-brands fa-whatsapp" style="color: #25D366;"></i>
          </a>
      </div>
      <p>Copyright &#9400; 2024: Chambuchito</p>
  </footer>

    <script>
      const comprarBtn = document.querySelector(".restar");
      const datosClienteSection = document.getElementById("datos-cliente");
      const resumenCompraSection = document.getElementById("resumen-compra");
      const totalCompraElement = document.getElementById("total-compra");
      const listaProductosElement = document.getElementById("lista-productos");
      const nombreClienteElement = document.getElementById("cliente-nombre");
      const contactoClienteElement =
        document.getElementById("cliente-contacto");

      // Mostrar el formulario para ingresar datos de contacto cuando el cliente haga clic en "Comprar"
      comprarBtn.addEventListener("click", () => {
        datosClienteSection.style.display = "block";
      });

      // Manejar la confirmación del formulario
      document
        .getElementById("form-datos-cliente")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          // Obtener los datos del cliente
          const nombreCliente = document.getElementById("nombre").value;
          const contactoCliente = document.getElementById("contacto").value;

          // Obtener los productos del carrito
          const productos = JSON.parse(localStorage.getItem("productos")) || [];

          // Mostrar los productos comprados
          listaProductosElement.innerHTML = ""; // Limpiar la lista de productos
          let total = 0; // Inicializar el total a 0

          // Recorrer los productos y calcular el total
          productos.forEach((producto) => {
            const item = document.createElement("li");
            // Verifica que el producto tenga las propiedades necesarias
            if (producto.cantidad && producto.nombre && producto.precio) {
              const subtotal = productos.precio * productos.cantidad; // Calcular el subtotal
              item.textContent = `${producto.cantidad}x ${
                producto.nombre
              } - $${subtotal.toFixed(2)}`; // Mostrar el subtotal
              listaProductosElement.appendChild(item); // Agregar el item a la lista
              total += subtotal; // Sumar al total
            } else {
              console.error(
                "El producto no tiene la estructura adecuada:",
                producto
              );
            }
          });

          // Mostrar los datos del cliente y el total de la compra
          nombreClienteElement.textContent = nombreCliente;
          contactoClienteElement.textContent = contactoCliente;
          totalCompraElement.textContent = total.toFixed(2); // Mostrar el total con dos decimales
          console.log(`Total a pagar: $${total.toFixed(2)}`); // Mostrar el total en la consola

          // Ocultar formulario y mostrar resumen
          datosClienteSection.style.display = "none";
          resumenCompraSection.style.display = "block";
        });
    </script>
  </body>

  
  <script src="style/js/datos-tarjetas.js"></script>
  <script src="/style/js/carrito-tarjetas.js"></script>
  <script src="/style/js/menuhambuerguesa.js"></script>
  
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
</html>
